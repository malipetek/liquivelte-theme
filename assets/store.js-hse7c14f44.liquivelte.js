import{writable as t}from'./liquivelte-svelte-hs27c0c7ec.liquivelte.js';const e={serialize:function serialize(t){var e=[];return Array.prototype.slice.call(t.elements).forEach((function(t){!t.name||t.disabled||['file','reset','submit','button'].indexOf(t.type)>-1||('select-multiple'!==t.type?['checkbox','radio'].indexOf(t.type)>-1&&!t.checked||e.push(encodeURIComponent(t.name)+'='+encodeURIComponent(t.value)):Array.prototype.slice.call(t.options).forEach((function(n){n.selected&&e.push(encodeURIComponent(t.name)+'='+encodeURIComponent(n.value))})))})),e.join('&')}};async function addToCart({form:t,variant:n,variantId:o,product:i,quantity:r=1,properties:s}={form:null,variant:null,variantId:null,product:null,quantity:null,properties:null}){let a={};let c;i&&i.variants&&(o=i.variants.find((t=>t.available))?.id),n&&(o=n.id);try{c=t&&t.constructor===HTMLFormElement?await fetch('/cart/add.js',{method:'POST',credentials:'same-origin',headers:{'Content-Type':'application/x-www-form-urlencoded','X-Requested-With':'XMLHttpRequest'},body:e.serialize(t)}):r?await fetch("/cart/add.js",{method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{quantity:r,id:o,properties:s}]})}):await fetch("/cart/add.js",{method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:o,quantity:r,properties:s}]})});const n=await c.json();if(n.status&&200!==n.status){var d=new Error(n.description);throw d}document.body.dispatchEvent(new CustomEvent('shopify:added_to_cart',{detail:n})),a=n}catch(t){a={status:500,description:t.message}}const l=await fetch('/cart.js');const u=await l.json();return u}async function updateLineItem(t,e){await fetch("/cart/update.js",{method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:{[t]:e}})});const n=await fetch('/cart.js');const o=await n.json();return o}function getScrollbarWidth(){const t=document.createElement('div');t.style.visibility='hidden',t.style.overflow='scroll',t.style.msOverflowStyle='scrollbar',document.body.appendChild(t);const e=document.createElement('div');e.style.width='100%',e.style.display='block',t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),n}var n=0;function disableScrollOnBody(){n=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),document.body.classList.add('prevent-scrolling'),document.body.setAttribute('style',`margin-top: -${n}px; width: ${window.innerWidth-getScrollbarWidth()}px;`)}function enableScrollOnBody(){document.body.classList.contains('prevent-scrolling')&&(document.body.classList.remove('prevent-scrolling'),document.body.style.marginTop='',document.documentElement.scrollTop=n,window.pageYOffset=n,document.body.scrollTop=n,document.body.style.width="")}try{document.querySelector(":focus-visible")}catch(t){focusVisiblePolyfill()}function focusVisiblePolyfill(){const t=['ARROWUP','ARROWDOWN','ARROWLEFT','ARROWRIGHT','TAB','ENTER','SPACE','ESCAPE','HOME','END','PAGEUP','PAGEDOWN'];let e=null;let n=null;window.addEventListener('keydown',(e=>{t.includes(e.code.toUpperCase())&&(n=!1)})),window.addEventListener('mousedown',(t=>{n=!0})),window.addEventListener('focus',(()=>{e&&e.classList.remove('focused'),n||(e=document.activeElement,e.classList.add('focused'))}),!0)}void 0===window.Shopify&&(window.Shopify={}),Shopify.bind=function(t,e){return function(){return t.apply(e,arguments)}},Shopify.setSelectorByValue=function(t,e){for(var n=0,o=t.options.length;n<o;n++){var i=t.options[n];if(e==i.value||e==i.innerHTML)return t.selectedIndex=n,n}},Shopify.addListener=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent('on'+e,n)},Shopify.postLink=function(t,e){e=e||{};var n=e.method||'post';var o=e.parameters||{};var i=document.createElement("form");for(var r in i.setAttribute("method",n),i.setAttribute("action",t),o){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",o[r]),i.appendChild(s)}document.body.appendChild(i),i.submit(),document.body.removeChild(i)},Shopify.CountryProvinceSelector=function(t,e,n){this.countryEl=document.getElementById(t),this.provinceEl=document.getElementById(e),this.provinceContainer=document.getElementById(n.hideElement||e),Shopify.addListener(this.countryEl,'change',Shopify.bind(this.countryHandler,this)),this.initCountry(),this.initProvince()},Shopify.CountryProvinceSelector.prototype={initCountry:function(){var t=this.countryEl.getAttribute('data-default');Shopify.setSelectorByValue(this.countryEl,t),this.countryHandler()},initProvince:function(){var t=this.provinceEl.getAttribute('data-default');t&&this.provinceEl.options.length>0&&Shopify.setSelectorByValue(this.provinceEl,t)},countryHandler:function(t){var e=this.countryEl.options[this.countryEl.selectedIndex];var n=e.getAttribute('data-provinces');var o=JSON.parse(n);if(this.clearOptions(this.provinceEl),o&&0==o.length)this.provinceContainer.style.display='none';else{for(var i=0;i<o.length;i++){var e=document.createElement('option');e.value=o[i][0],e.innerHTML=o[i][1],this.provinceEl.appendChild(e)}this.provinceContainer.style.display=""}},clearOptions:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},setOptions:function(t,e){for(var n=0,o=e.length;n<e.length;n++){var i=document.createElement('option');i.value=e[n],i.innerHTML=e[n],t.appendChild(i)}}};const o=t(!1);const i=t(!1);function createCartStore(){const{subscribe:e,set:n,update:o}=t(0);return e((t=>{})),{subscribe:e,set:n,update:o,add:async t=>{i.set(!0);const e=await addToCart(t);n({...e}),i.set(!1)},setQuantity:async(t,e)=>{i.set(!0);const o=await updateLineItem(t,e);n({...o}),i.set(!1)},increment:async(t,e)=>{i.set(!0);const o=await updateLineItem(t,e+1);n({...o}),i.set(!1)},decrement:async(t,e)=>{i.set(!0);const o=await updateLineItem(t,e-1);n({...o}),i.set(!1)},reset:()=>{}}}const r=createCartStore();export{o as cartOpen,r as cartStore,disableScrollOnBody,enableScrollOnBody,i as loading};
