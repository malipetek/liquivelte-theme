import { create_slot, element, space, claim_element, children, detach, claim_space, attr, toggle_class, insert_hydration, append_hydration, update_slot_base, get_all_dirty_from_scope, get_slot_changes, transition_in, transition_out, SvelteComponent, init, safe_not_equal, text, claim_text, set_data, is_function, create_component, claim_component, mount_component, destroy_component, listen, binding_callbacks, bind, src_url_equal, add_flush_callback, add_render_callback, create_bidirectional_transition, quintInOut, destroy_each, set_style, add_resize_listener, action_destroyer, group_outros, check_outros, run_all, component_subscribe, set_store_value, spring } from './liquivelte-svelte-hs623f7d73.liquivelte.js';
import { cachedLiquid } from './liquivelte-liquid-hs6dbc6cca.liquivelte.js';
import { Quantity_box } from './main-product-hsd0b415a6.liquivelte.js';
import { cartOpen, cartStore } from './store.js-hs80deeb5c.liquivelte.js';
import { disableScrollOnBody, enableScrollOnBody } from './header-hs533fc9cb.liquivelte.js';
import './swiper.js-hs29fa2260.liquivelte.js';

/* Usersmalipetek/Documents/Documents/Projects/LIQUVELTE/LIQUIVELTE TEST/src/snippets/loadable.liquivelte generated by Svelte v3.50.0 */

function create_fragment$1(ctx) {
	let div2;
	let div0;
	let raw_value = /*rawinclude_dff1c036*/ ctx[0][index$1 || 0] + "";
	let t;
	let div1;
	let div2_class_value;
	let current;
	const default_slot_template = /*#slots*/ ctx[5].default;
	const default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[4], null);

	return {
		c() {
			div2 = element("div");
			div0 = element("div");
			t = space();
			div1 = element("div");
			if (default_slot) default_slot.c();
			this.h();
		},
		l(nodes) {
			div2 = claim_element(nodes, "DIV", { class: true });
			var div2_nodes = children(div2);
			div0 = claim_element(div2_nodes, "DIV", { class: true });
			var div0_nodes = children(div0);
			div0_nodes.forEach(detach);
			t = claim_space(div2_nodes);
			div1 = claim_element(div2_nodes, "DIV", {});
			var div1_nodes = children(div1);
			if (default_slot) default_slot.l(div1_nodes);
			div1_nodes.forEach(detach);
			div2_nodes.forEach(detach);
			this.h();
		},
		h() {
			attr(div0, "class", "w-6 absolute");
			toggle_class(div0, "hidden", /*loading*/ ctx[2] != true);
			toggle_class(div1, "invisible", /*loading*/ ctx[2]);
			attr(div2, "class", div2_class_value = "relative " + /*classes*/ ctx[1]);
		},
		m(target, anchor) {
			insert_hydration(target, div2, anchor);
			append_hydration(div2, div0);
			div0.innerHTML = raw_value;
			append_hydration(div2, t);
			append_hydration(div2, div1);

			if (default_slot) {
				default_slot.m(div1, null);
			}

			current = true;
		},
		p(ctx, [dirty]) {
			if ((!current || dirty & /*rawinclude_dff1c036*/ 1) && raw_value !== (raw_value = /*rawinclude_dff1c036*/ ctx[0][index$1 || 0] + "")) div0.innerHTML = raw_value;;

			if (!current || dirty & /*loading*/ 4) {
				toggle_class(div0, "hidden", /*loading*/ ctx[2] != true);
			}

			if (default_slot) {
				if (default_slot.p && (!current || dirty & /*$$scope*/ 16)) {
					update_slot_base(
						default_slot,
						default_slot_template,
						ctx,
						/*$$scope*/ ctx[4],
						!current
						? get_all_dirty_from_scope(/*$$scope*/ ctx[4])
						: get_slot_changes(default_slot_template, /*$$scope*/ ctx[4], dirty, null),
						null
					);
				}
			}

			if (!current || dirty & /*loading*/ 4) {
				toggle_class(div1, "invisible", /*loading*/ ctx[2]);
			}

			if (!current || dirty & /*classes*/ 2 && div2_class_value !== (div2_class_value = "relative " + /*classes*/ ctx[1])) {
				attr(div2, "class", div2_class_value);
			}
		},
		i(local) {
			if (current) return;
			transition_in(default_slot, local);
			current = true;
		},
		o(local) {
			transition_out(default_slot, local);
			current = false;
		},
		d(detaching) {
			if (detaching) detach(div2);
			if (default_slot) default_slot.d(detaching);
		}
	};
}

let index$1 = 0;

function instance$1($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	let { lec } = $$props;
	const liquid = cachedLiquid(lec);
	let { rawinclude_dff1c036 } = $$props;
	let { classes } = $$props;
	let { loading = false } = $$props;

	$$self.$$set = $$props => {
		if ('lec' in $$props) $$invalidate(3, lec = $$props.lec);
		if ('rawinclude_dff1c036' in $$props) $$invalidate(0, rawinclude_dff1c036 = $$props.rawinclude_dff1c036);
		if ('classes' in $$props) $$invalidate(1, classes = $$props.classes);
		if ('loading' in $$props) $$invalidate(2, loading = $$props.loading);
		if ('$$scope' in $$props) $$invalidate(4, $$scope = $$props.$$scope);
	};

	return [rawinclude_dff1c036, classes, loading, lec, $$scope, slots];
}

class Loadable extends SvelteComponent {
	constructor(options) {
		super();

		init(this, options, instance$1, create_fragment$1, safe_not_equal, {
			lec: 3,
			rawinclude_dff1c036: 0,
			classes: 1,
			loading: 2
		});
	}
}

function swipe(node, p = {}) {
    let params = p;

    // document.addEventListener('mousemove', move);
    // document.addEventListener('touchmove', move);

    node.addEventListener('mouseup', stopMove);
    node.addEventListener('touchend', stopMove);
    
	node.addEventListener('mousedown', startMove);
	node.addEventListener('touchstart', startMove);

    let x = 0;
    let y = 0;

    function startMove(event) {
        x = event.changedTouches ? event.changedTouches[0].clientX : event.clientX;
        y = event.changedTouches ? event.changedTouches[0].clientY : event.clientY;

		node.dispatchEvent(new CustomEvent('swipeStart', {
			detail: { x, y }
		}));
        // console.log('start move');
		window.addEventListener('mousemove', move);
		window.addEventListener('mouseup', stopMove);
		window.addEventListener('touchmove', move);
		window.addEventListener('touchend', stopMove);
    }
    function move(event) {
        // console.log('startmove');
        const dx = (event.changedTouches ? event.changedTouches[0].clientX : event.clientX) - x;
        const dy = (event.changedTouches ? event.changedTouches[0].clientY : event.clientY) - y;

		x = event.changedTouches ? event.changedTouches[0].clientX : event.clientX;
		y = event.changedTouches ? event.changedTouches[0].clientY : event.clientY;

		node.dispatchEvent(new CustomEvent('swipe', {
			detail: { x, y, dx, dy }
		}));
    }
    function stopMove(event) {
        // console.log('stopmove');
        x = event.changedTouches ? event.changedTouches[0].clientX : event.clientX;
        y = event.changedTouches ? event.changedTouches[0].clientY : event.clientY;

        node.dispatchEvent(new CustomEvent('swipeEnd', {
			detail: { x, y }
		}));
        window.removeEventListener('mousemove', move);
		window.removeEventListener('mouseup', stopMove);
		window.removeEventListener('touchmove', move);
		window.removeEventListener('touchend', stopMove);

    }
    return {
        update(p) {
            params = p;
        },
        destroy() {
            document.removeEventListener('mousemove', move);
            document.removeEventListener('touchmove', move);
            document.removeEventListener('lostpointercapture', stopMove);
            document.removeEventListener('touchcancel', stopMove);
        }
    }
}

/* Usersmalipetek/Documents/Documents/Projects/LIQUVELTE/LIQUIVELTE TEST/src/sections/main-cart.liquivelte generated by Svelte v3.50.0 */

function get_each_context(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[33] = list[i];
	child_ctx[36] = i;

	const constants_0 = {
		first: /*index*/ child_ctx[36] === 0,
		index: /*index*/ child_ctx[36] + 1,
		index0: /*index*/ child_ctx[36],
		last: /*index*/ child_ctx[36] === /*cart*/ child_ctx[4].items.length - 1,
		rindex: /*cart*/ child_ctx[4].items.length - /*index*/ child_ctx[36],
		rindex0: /*cart*/ child_ctx[4].items.length - /*index*/ child_ctx[36] - 1,
		length: /*cart*/ child_ctx[4].items.length
	};

	child_ctx[34] = constants_0;
	return child_ctx;
}

function get_each_context_1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[37] = list[i];
	child_ctx[36] = i;

	const constants_0 = {
		first: /*index*/ child_ctx[36] === 0,
		index: /*index*/ child_ctx[36] + 1,
		index0: /*index*/ child_ctx[36],
		last: /*index*/ child_ctx[36] === /*item*/ child_ctx[33].variant_options.length - 1,
		rindex: /*item*/ child_ctx[33].variant_options.length - /*index*/ child_ctx[36],
		rindex0: /*item*/ child_ctx[33].variant_options.length - /*index*/ child_ctx[36] - 1,
		length: /*item*/ child_ctx[33].variant_options.length
	};

	child_ctx[34] = constants_0;
	return child_ctx;
}

// (144:9) {#each  item.variant_options as option, index  }
function create_each_block_1(ctx) {
	let span;
	let t0_value = /*option*/ ctx[37] + "";
	let t0;
	let t1;
	let br;

	return {
		c() {
			span = element("span");
			t0 = text(t0_value);
			t1 = space();
			br = element("br");
			this.h();
		},
		l(nodes) {
			span = claim_element(nodes, "SPAN", { class: true });
			var span_nodes = children(span);
			t0 = claim_text(span_nodes, t0_value);
			span_nodes.forEach(detach);
			t1 = claim_space(nodes);
			br = claim_element(nodes, "BR", {});
			this.h();
		},
		h() {
			attr(span, "class", "text-gray-500 text-base line-item-option");
		},
		m(target, anchor) {
			insert_hydration(target, span, anchor);
			append_hydration(span, t0);
			insert_hydration(target, t1, anchor);
			insert_hydration(target, br, anchor);
		},
		p(ctx, dirty) {
			if (dirty[0] & /*cart*/ 16 && t0_value !== (t0_value = /*option*/ ctx[37] + "")) set_data(t0, t0_value);
		},
		d(detaching) {
			if (detaching) detach(span);
			if (detaching) detach(t1);
			if (detaching) detach(br);
		}
	};
}

// (158:7) <Loadable  bind:loading   inputWidth={inputWidth} cart={cart} min_amounts={min_amounts}    rawinclude_dff1c036={rawinclude_dff1c036} rawinclude_2753db78={rawinclude_2753db78} lec={lec} >
function create_default_slot_1(ctx) {
	let quantitybox;
	let current;

	quantitybox = new Quantity_box({
			props: {
				minimum: /*min_amounts_data*/ ctx[15][/*item*/ ctx[33].id],
				quantity: /*item*/ ctx[33].quantity,
				inputWidth: /*inputWidth*/ ctx[3],
				cart: /*cart*/ ctx[4],
				min_amounts: /*min_amounts*/ ctx[5],
				rawinclude_dff1c036: /*rawinclude_dff1c036*/ ctx[1],
				rawinclude_2753db78: /*rawinclude_2753db78*/ ctx[2],
				lec: /*lec*/ ctx[0]
			}
		});

	quantitybox.$on("qtychange", function () {
		if (is_function(/*quantityChange*/ ctx[22].bind(/*item*/ ctx[33]))) /*quantityChange*/ ctx[22].bind(/*item*/ ctx[33]).apply(this, arguments);
	});

	return {
		c() {
			create_component(quantitybox.$$.fragment);
		},
		l(nodes) {
			claim_component(quantitybox.$$.fragment, nodes);
		},
		m(target, anchor) {
			mount_component(quantitybox, target, anchor);
			current = true;
		},
		p(new_ctx, dirty) {
			ctx = new_ctx;
			const quantitybox_changes = {};
			if (dirty[0] & /*cart*/ 16) quantitybox_changes.minimum = /*min_amounts_data*/ ctx[15][/*item*/ ctx[33].id];
			if (dirty[0] & /*cart*/ 16) quantitybox_changes.quantity = /*item*/ ctx[33].quantity;
			if (dirty[0] & /*inputWidth*/ 8) quantitybox_changes.inputWidth = /*inputWidth*/ ctx[3];
			if (dirty[0] & /*cart*/ 16) quantitybox_changes.cart = /*cart*/ ctx[4];
			if (dirty[0] & /*min_amounts*/ 32) quantitybox_changes.min_amounts = /*min_amounts*/ ctx[5];
			if (dirty[0] & /*rawinclude_dff1c036*/ 2) quantitybox_changes.rawinclude_dff1c036 = /*rawinclude_dff1c036*/ ctx[1];
			if (dirty[0] & /*rawinclude_2753db78*/ 4) quantitybox_changes.rawinclude_2753db78 = /*rawinclude_2753db78*/ ctx[2];
			if (dirty[0] & /*lec*/ 1) quantitybox_changes.lec = /*lec*/ ctx[0];
			quantitybox.$set(quantitybox_changes);
		},
		i(local) {
			if (current) return;
			transition_in(quantitybox.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(quantitybox.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			destroy_component(quantitybox, detaching);
		}
	};
}

// (163:7) <Loadable  bind:loading   inputWidth={inputWidth} cart={cart} min_amounts={min_amounts}    rawinclude_dff1c036={rawinclude_dff1c036} rawinclude_2753db78={rawinclude_2753db78} lec={lec} >
function create_default_slot(ctx) {
	let div;
	let raw_value = /*rawinclude_2753db78*/ ctx[2][/*index*/ ctx[36] || 0] + "";
	let mounted;
	let dispose;

	function click_handler() {
		return /*click_handler*/ ctx[24](/*item*/ ctx[33]);
	}

	return {
		c() {
			div = element("div");
			this.h();
		},
		l(nodes) {
			div = claim_element(nodes, "DIV", { class: true });
			var div_nodes = children(div);
			div_nodes.forEach(detach);
			this.h();
		},
		h() {
			attr(div, "class", "pointer");
		},
		m(target, anchor) {
			insert_hydration(target, div, anchor);
			div.innerHTML = raw_value;

			if (!mounted) {
				dispose = listen(div, "click", click_handler);
				mounted = true;
			}
		},
		p(new_ctx, dirty) {
			ctx = new_ctx;
			if (dirty[0] & /*rawinclude_2753db78*/ 4 && raw_value !== (raw_value = /*rawinclude_2753db78*/ ctx[2][/*index*/ ctx[36] || 0] + "")) div.innerHTML = raw_value;;
		},
		d(detaching) {
			if (detaching) detach(div);
			mounted = false;
			dispose();
		}
	};
}

// (128:4) {#each  cart.items as item, index  }
function create_each_block(ctx) {
	let div5;
	let img;
	let img_src_value;
	let t0;
	let div2;
	let div1;
	let span;
	let t1_value = /*item*/ ctx[33].product_title + "";
	let t1;
	let t2;
	let div0;
	let t3;
	let loadable0;
	let updating_loading;
	let t4;
	let div4;
	let loadable1;
	let updating_loading_1;
	let t5;
	let div3;
	let t6_value = /*liquid*/ ctx[14].money(/*item*/ ctx[33].price) + "";
	let t6;
	let t7;
	let div5_data_id_value;
	let div5_transition;
	let current;
	let each_value_1 = /*item*/ ctx[33].variant_options;
	let each_blocks = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
	}

	function loadable0_loading_binding(value) {
		/*loadable0_loading_binding*/ ctx[23](value);
	}

	let loadable0_props = {
		inputWidth: /*inputWidth*/ ctx[3],
		cart: /*cart*/ ctx[4],
		min_amounts: /*min_amounts*/ ctx[5],
		rawinclude_dff1c036: /*rawinclude_dff1c036*/ ctx[1],
		rawinclude_2753db78: /*rawinclude_2753db78*/ ctx[2],
		lec: /*lec*/ ctx[0],
		$$slots: { default: [create_default_slot_1] },
		$$scope: { ctx }
	};

	if (/*loading*/ ctx[10] !== void 0) {
		loadable0_props.loading = /*loading*/ ctx[10];
	}

	loadable0 = new Loadable({ props: loadable0_props });
	binding_callbacks.push(() => bind(loadable0, 'loading', loadable0_loading_binding));

	function loadable1_loading_binding(value) {
		/*loadable1_loading_binding*/ ctx[25](value);
	}

	let loadable1_props = {
		inputWidth: /*inputWidth*/ ctx[3],
		cart: /*cart*/ ctx[4],
		min_amounts: /*min_amounts*/ ctx[5],
		rawinclude_dff1c036: /*rawinclude_dff1c036*/ ctx[1],
		rawinclude_2753db78: /*rawinclude_2753db78*/ ctx[2],
		lec: /*lec*/ ctx[0],
		$$slots: { default: [create_default_slot] },
		$$scope: { ctx }
	};

	if (/*loading*/ ctx[10] !== void 0) {
		loadable1_props.loading = /*loading*/ ctx[10];
	}

	loadable1 = new Loadable({ props: loadable1_props });
	binding_callbacks.push(() => bind(loadable1, 'loading', loadable1_loading_binding));

	return {
		c() {
			div5 = element("div");
			img = element("img");
			t0 = space();
			div2 = element("div");
			div1 = element("div");
			span = element("span");
			t1 = text(t1_value);
			t2 = space();
			div0 = element("div");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t3 = space();
			create_component(loadable0.$$.fragment);
			t4 = space();
			div4 = element("div");
			create_component(loadable1.$$.fragment);
			t5 = space();
			div3 = element("div");
			t6 = text(t6_value);
			t7 = space();
			this.h();
		},
		l(nodes) {
			div5 = claim_element(nodes, "DIV", { "data-id": true, class: true });
			var div5_nodes = children(div5);
			img = claim_element(div5_nodes, "IMG", { src: true, alt: true, class: true });
			t0 = claim_space(div5_nodes);
			div2 = claim_element(div5_nodes, "DIV", { class: true });
			var div2_nodes = children(div2);
			div1 = claim_element(div2_nodes, "DIV", { class: true });
			var div1_nodes = children(div1);
			span = claim_element(div1_nodes, "SPAN", { class: true });
			var span_nodes = children(span);
			t1 = claim_text(span_nodes, t1_value);
			span_nodes.forEach(detach);
			t2 = claim_space(div1_nodes);
			div0 = claim_element(div1_nodes, "DIV", { class: true });
			var div0_nodes = children(div0);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].l(div0_nodes);
			}

			div0_nodes.forEach(detach);
			div1_nodes.forEach(detach);
			t3 = claim_space(div2_nodes);
			claim_component(loadable0.$$.fragment, div2_nodes);
			div2_nodes.forEach(detach);
			t4 = claim_space(div5_nodes);
			div4 = claim_element(div5_nodes, "DIV", { class: true });
			var div4_nodes = children(div4);
			claim_component(loadable1.$$.fragment, div4_nodes);
			t5 = claim_space(div4_nodes);
			div3 = claim_element(div4_nodes, "DIV", { class: true });
			var div3_nodes = children(div3);
			t6 = claim_text(div3_nodes, t6_value);
			div3_nodes.forEach(detach);
			div4_nodes.forEach(detach);
			t7 = claim_space(div5_nodes);
			div5_nodes.forEach(detach);
			this.h();
		},
		h() {
			if (!src_url_equal(img.src, img_src_value = /*liquid*/ ctx[14].img_url(/*item*/ ctx[33].image, '120x'))) attr(img, "src", img_src_value);
			attr(img, "alt", "cart item product image");
			attr(img, "class", "flex-grow-0 mr-2 w-32");
			attr(span, "class", "cart-item-title text-lg");
			attr(div0, "class", "cart-item-options");
			attr(div1, "class", "cart-item-content__up");
			attr(div2, "class", "cart-item-content");
			attr(div3, "class", "cart-item-price text-black text-xl");
			attr(div4, "class", "cart-item-right");
			attr(div5, "data-id", div5_data_id_value = /*item*/ ctx[33].id);
			attr(div5, "class", "cart-item w-full flex mb-10");
		},
		m(target, anchor) {
			insert_hydration(target, div5, anchor);
			append_hydration(div5, img);
			append_hydration(div5, t0);
			append_hydration(div5, div2);
			append_hydration(div2, div1);
			append_hydration(div1, span);
			append_hydration(span, t1);
			append_hydration(div1, t2);
			append_hydration(div1, div0);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(div0, null);
			}

			append_hydration(div2, t3);
			mount_component(loadable0, div2, null);
			append_hydration(div5, t4);
			append_hydration(div5, div4);
			mount_component(loadable1, div4, null);
			append_hydration(div4, t5);
			append_hydration(div4, div3);
			append_hydration(div3, t6);
			append_hydration(div5, t7);
			current = true;
		},
		p(new_ctx, dirty) {
			ctx = new_ctx;

			if (!current || dirty[0] & /*cart*/ 16 && !src_url_equal(img.src, img_src_value = /*liquid*/ ctx[14].img_url(/*item*/ ctx[33].image, '120x'))) {
				attr(img, "src", img_src_value);
			}

			if ((!current || dirty[0] & /*cart*/ 16) && t1_value !== (t1_value = /*item*/ ctx[33].product_title + "")) set_data(t1, t1_value);

			if (dirty[0] & /*cart*/ 16) {
				each_value_1 = /*item*/ ctx[33].variant_options;
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1(ctx, each_value_1, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block_1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(div0, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value_1.length;
			}

			const loadable0_changes = {};
			if (dirty[0] & /*inputWidth*/ 8) loadable0_changes.inputWidth = /*inputWidth*/ ctx[3];
			if (dirty[0] & /*cart*/ 16) loadable0_changes.cart = /*cart*/ ctx[4];
			if (dirty[0] & /*min_amounts*/ 32) loadable0_changes.min_amounts = /*min_amounts*/ ctx[5];
			if (dirty[0] & /*rawinclude_dff1c036*/ 2) loadable0_changes.rawinclude_dff1c036 = /*rawinclude_dff1c036*/ ctx[1];
			if (dirty[0] & /*rawinclude_2753db78*/ 4) loadable0_changes.rawinclude_2753db78 = /*rawinclude_2753db78*/ ctx[2];
			if (dirty[0] & /*lec*/ 1) loadable0_changes.lec = /*lec*/ ctx[0];

			if (dirty[0] & /*cart, inputWidth, min_amounts, rawinclude_dff1c036, rawinclude_2753db78, lec*/ 63 | dirty[1] & /*$$scope*/ 256) {
				loadable0_changes.$$scope = { dirty, ctx };
			}

			if (!updating_loading && dirty[0] & /*loading*/ 1024) {
				updating_loading = true;
				loadable0_changes.loading = /*loading*/ ctx[10];
				add_flush_callback(() => updating_loading = false);
			}

			loadable0.$set(loadable0_changes);
			const loadable1_changes = {};
			if (dirty[0] & /*inputWidth*/ 8) loadable1_changes.inputWidth = /*inputWidth*/ ctx[3];
			if (dirty[0] & /*cart*/ 16) loadable1_changes.cart = /*cart*/ ctx[4];
			if (dirty[0] & /*min_amounts*/ 32) loadable1_changes.min_amounts = /*min_amounts*/ ctx[5];
			if (dirty[0] & /*rawinclude_dff1c036*/ 2) loadable1_changes.rawinclude_dff1c036 = /*rawinclude_dff1c036*/ ctx[1];
			if (dirty[0] & /*rawinclude_2753db78*/ 4) loadable1_changes.rawinclude_2753db78 = /*rawinclude_2753db78*/ ctx[2];
			if (dirty[0] & /*lec*/ 1) loadable1_changes.lec = /*lec*/ ctx[0];

			if (dirty[0] & /*cart, rawinclude_2753db78*/ 20 | dirty[1] & /*$$scope*/ 256) {
				loadable1_changes.$$scope = { dirty, ctx };
			}

			if (!updating_loading_1 && dirty[0] & /*loading*/ 1024) {
				updating_loading_1 = true;
				loadable1_changes.loading = /*loading*/ ctx[10];
				add_flush_callback(() => updating_loading_1 = false);
			}

			loadable1.$set(loadable1_changes);
			if ((!current || dirty[0] & /*cart*/ 16) && t6_value !== (t6_value = /*liquid*/ ctx[14].money(/*item*/ ctx[33].price) + "")) set_data(t6, t6_value);

			if (!current || dirty[0] & /*cart*/ 16 && div5_data_id_value !== (div5_data_id_value = /*item*/ ctx[33].id)) {
				attr(div5, "data-id", div5_data_id_value);
			}
		},
		i(local) {
			if (current) return;
			transition_in(loadable0.$$.fragment, local);
			transition_in(loadable1.$$.fragment, local);

			add_render_callback(() => {
				if (!div5_transition) div5_transition = create_bidirectional_transition(div5, scale, { duration: 300, easing: quintInOut }, true);
				div5_transition.run(1);
			});

			current = true;
		},
		o(local) {
			transition_out(loadable0.$$.fragment, local);
			transition_out(loadable1.$$.fragment, local);
			if (!div5_transition) div5_transition = create_bidirectional_transition(div5, scale, { duration: 300, easing: quintInOut }, false);
			div5_transition.run(0);
			current = false;
		},
		d(detaching) {
			if (detaching) detach(div5);
			destroy_each(each_blocks, detaching);
			destroy_component(loadable0);
			destroy_component(loadable1);
			if (detaching && div5_transition) div5_transition.end();
		}
	};
}

function create_fragment(ctx) {
	let button0;
	let t0;
	let t1;
	let t2;
	let div0;
	let t3;
	let div10;
	let form;
	let input;
	let t4;
	let div9;
	let div8;
	let div1;
	let span0;
	let t5;
	let t6;
	let span1;
	let t7;
	let div2;
	let t8;
	let div3;
	let t9;
	let div6;
	let div4;
	let span2;
	let t10_value = /*liquid*/ ctx[14].t('general.cart.subtotal') + "";
	let t10;
	let span2_data_t_value;
	let t11;
	let span3;
	let t12_value = /*liquid*/ ctx[14].money(/*cart*/ ctx[4].items_subtotal_price) + "";
	let t12;
	let t13;
	let div5;
	let t14;
	let t15;
	let button1;
	let t16;
	let t17;
	let a;
	let t18;
	let t19;
	let div7;
	let t20;
	let t21;
	let t22;
	let button2;
	let t23;
	let swipe_action;
	let div10_resize_listener;
	let div10_transition;
	let current;
	let mounted;
	let dispose;
	let each_value = /*cart*/ ctx[4].items;
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
	}

	const out = i => transition_out(each_blocks[i], 1, 1, () => {
		each_blocks[i] = null;
	});

	return {
		c() {
			button0 = element("button");
			t0 = text(/*cart_action*/ ctx[12]);
			t1 = text(" Cart");
			t2 = space();
			div0 = element("div");
			t3 = space();
			div10 = element("div");
			form = element("form");
			input = element("input");
			t4 = space();
			div9 = element("div");
			div8 = element("div");
			div1 = element("div");
			span0 = element("span");
			t5 = text("Shopping Cart");
			t6 = space();
			span1 = element("span");
			t7 = space();
			div2 = element("div");
			t8 = space();
			div3 = element("div");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t9 = space();
			div6 = element("div");
			div4 = element("div");
			span2 = element("span");
			t10 = text(t10_value);
			t11 = space();
			span3 = element("span");
			t12 = text(t12_value);
			t13 = space();
			div5 = element("div");
			t14 = text("Taxes and shipping calculated at checkout");
			t15 = space();
			button1 = element("button");
			t16 = text("Checkout");
			t17 = space();
			a = element("a");
			t18 = text("View Cart");
			t19 = space();
			div7 = element("div");
			t20 = text("Loading ");
			t21 = text(/*loading*/ ctx[10]);
			t22 = space();
			button2 = element("button");
			t23 = text("Toggle");
			this.h();
		},
		l(nodes) {
			button0 = claim_element(nodes, "BUTTON", {});
			var button0_nodes = children(button0);
			t0 = claim_text(button0_nodes, /*cart_action*/ ctx[12]);
			t1 = claim_text(button0_nodes, " Cart");
			button0_nodes.forEach(detach);
			t2 = claim_space(nodes);

			div0 = claim_element(nodes, "DIV", {
				"cart-drawer-backdrop": true,
				class: true
			});

			children(div0).forEach(detach);
			t3 = claim_space(nodes);
			div10 = claim_element(nodes, "DIV", { id: true, class: true, style: true });
			var div10_nodes = children(div10);
			form = claim_element(div10_nodes, "FORM", { action: true, method: true, class: true });
			var form_nodes = children(form);
			input = claim_element(form_nodes, "INPUT", { type: true, name: true });
			t4 = claim_space(form_nodes);
			div9 = claim_element(form_nodes, "DIV", { class: true });
			var div9_nodes = children(div9);
			div8 = claim_element(div9_nodes, "DIV", { class: true });
			var div8_nodes = children(div8);
			div1 = claim_element(div8_nodes, "DIV", { class: true });
			var div1_nodes = children(div1);
			span0 = claim_element(div1_nodes, "SPAN", {});
			var span0_nodes = children(span0);
			t5 = claim_text(span0_nodes, "Shopping Cart");
			span0_nodes.forEach(detach);
			t6 = claim_space(div1_nodes);
			span1 = claim_element(div1_nodes, "SPAN", { class: true });
			var span1_nodes = children(span1);
			span1_nodes.forEach(detach);
			div1_nodes.forEach(detach);
			t7 = claim_space(div8_nodes);
			div2 = claim_element(div8_nodes, "DIV", { class: true });
			children(div2).forEach(detach);
			t8 = claim_space(div8_nodes);
			div3 = claim_element(div8_nodes, "DIV", { class: true });
			var div3_nodes = children(div3);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].l(div3_nodes);
			}

			div3_nodes.forEach(detach);
			t9 = claim_space(div8_nodes);
			div6 = claim_element(div8_nodes, "DIV", { class: true });
			var div6_nodes = children(div6);
			div4 = claim_element(div6_nodes, "DIV", { class: true });
			var div4_nodes = children(div4);
			span2 = claim_element(div4_nodes, "SPAN", { class: true, "data-t": true });
			var span2_nodes = children(span2);
			t10 = claim_text(span2_nodes, t10_value);
			span2_nodes.forEach(detach);
			t11 = claim_space(div4_nodes);

			span3 = claim_element(div4_nodes, "SPAN", {
				"cart-drawer-subtotal-text": true,
				class: true
			});

			var span3_nodes = children(span3);
			t12 = claim_text(span3_nodes, t12_value);
			span3_nodes.forEach(detach);
			div4_nodes.forEach(detach);
			t13 = claim_space(div6_nodes);
			div5 = claim_element(div6_nodes, "DIV", { class: true });
			var div5_nodes = children(div5);
			t14 = claim_text(div5_nodes, "Taxes and shipping calculated at checkout");
			div5_nodes.forEach(detach);
			t15 = claim_space(div6_nodes);
			button1 = claim_element(div6_nodes, "BUTTON", { class: true });
			var button1_nodes = children(button1);
			t16 = claim_text(button1_nodes, "Checkout");
			button1_nodes.forEach(detach);
			t17 = claim_space(div6_nodes);
			a = claim_element(div6_nodes, "A", { class: true, href: true });
			var a_nodes = children(a);
			t18 = claim_text(a_nodes, "View Cart");
			a_nodes.forEach(detach);
			div6_nodes.forEach(detach);
			t19 = claim_space(div8_nodes);
			div7 = claim_element(div8_nodes, "DIV", {});
			var div7_nodes = children(div7);
			t20 = claim_text(div7_nodes, "Loading ");
			t21 = claim_text(div7_nodes, /*loading*/ ctx[10]);
			t22 = claim_space(div7_nodes);
			button2 = claim_element(div7_nodes, "BUTTON", { class: true, type: true });
			var button2_nodes = children(button2);
			t23 = claim_text(button2_nodes, "Toggle");
			button2_nodes.forEach(detach);
			div7_nodes.forEach(detach);
			div8_nodes.forEach(detach);
			div9_nodes.forEach(detach);
			form_nodes.forEach(detach);
			div10_nodes.forEach(detach);
			this.h();
		},
		h() {
			attr(div0, "cart-drawer-backdrop", "");
			attr(div0, "class", "w-full h-full inset-0 fixed z-9");
			toggle_class(div0, "hidden", /*$cartOpen*/ ctx[6] != true);
			attr(input, "type", "text");
			input.hidden = true;
			attr(input, "name", "checkout");
			input.value = "Checkout";
			attr(span1, "class", "float-right close pointer");
			attr(div1, "class", "cart-drawer-title text-gray f-14 uppercase");
			attr(div2, "class", "spacer");
			attr(div3, "class", "cart-drawer-items");
			attr(span2, "class", "text-gray text-base float-left");
			attr(span2, "data-t", span2_data_t_value = /*liquid*/ ctx[14].t('general.cart.subtotal'));
			attr(span3, "cart-drawer-subtotal-text", "");
			attr(span3, "class", "float-right text-black text-lg ");
			attr(div4, "class", "cart-drawer-subtotal");
			attr(div5, "class", "cart-drawer-taxes-notice text-base text-black float-left");
			attr(button1, "class", "mt-10 w-full bg-indigo-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500");
			attr(a, "class", "mt-10 w-full bg-gray-300 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-black hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500");
			attr(a, "href", "/cart");
			attr(div6, "class", "cart-drawer-bottom");
			attr(button2, "class", "mt-10 w-full bg-gray-300 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-black hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500");
			attr(button2, "type", "button");
			attr(div8, "class", "cart-drawer-inner-up");
			attr(div9, "class", "cart-drawer-inner");
			attr(form, "action", "/cart");
			attr(form, "method", "post");
			form.noValidate = "";
			attr(form, "class", "cart");
			attr(div10, "id", "cart-drawer");
			attr(div10, "class", "block fixed top-0 bg-white p-16 h-full z-10 -right-full transition-all duration-300 max-w-full");
			set_style(div10, "transform", "translateX(" + /*$swipeLeft*/ ctx[13] + "px)");
			add_render_callback(() => /*div10_elementresize_handler*/ ctx[30].call(div10));
			toggle_class(div10, "right-0", /*$cartOpen*/ ctx[6]);
		},
		m(target, anchor) {
			insert_hydration(target, button0, anchor);
			append_hydration(button0, t0);
			append_hydration(button0, t1);
			insert_hydration(target, t2, anchor);
			insert_hydration(target, div0, anchor);
			insert_hydration(target, t3, anchor);
			insert_hydration(target, div10, anchor);
			append_hydration(div10, form);
			append_hydration(form, input);
			append_hydration(form, t4);
			append_hydration(form, div9);
			append_hydration(div9, div8);
			append_hydration(div8, div1);
			append_hydration(div1, span0);
			append_hydration(span0, t5);
			append_hydration(div1, t6);
			append_hydration(div1, span1);
			append_hydration(div8, t7);
			append_hydration(div8, div2);
			append_hydration(div8, t8);
			append_hydration(div8, div3);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(div3, null);
			}

			append_hydration(div8, t9);
			append_hydration(div8, div6);
			append_hydration(div6, div4);
			append_hydration(div4, span2);
			append_hydration(span2, t10);
			append_hydration(div4, t11);
			append_hydration(div4, span3);
			append_hydration(span3, t12);
			append_hydration(div6, t13);
			append_hydration(div6, div5);
			append_hydration(div5, t14);
			append_hydration(div6, t15);
			append_hydration(div6, button1);
			append_hydration(button1, t16);
			append_hydration(div6, t17);
			append_hydration(div6, a);
			append_hydration(a, t18);
			append_hydration(div8, t19);
			append_hydration(div8, div7);
			append_hydration(div7, t20);
			append_hydration(div7, t21);
			append_hydration(div7, t22);
			append_hydration(div7, button2);
			append_hydration(button2, t23);
			/*form_binding*/ ctx[28](form);
			/*div10_binding*/ ctx[29](div10);
			div10_resize_listener = add_resize_listener(div10, /*div10_elementresize_handler*/ ctx[30].bind(div10));
			current = true;

			if (!mounted) {
				dispose = [
					listen(button0, "click", /*toggleCart*/ ctx[21]),
					listen(div0, "click", /*closeCart*/ ctx[20]),
					listen(span1, "click", /*closeCart*/ ctx[20]),
					listen(button1, "click", /*click_handler_1*/ ctx[26]),
					listen(button2, "click", /*click_handler_2*/ ctx[27]),
					action_destroyer(swipe_action = swipe.call(null, div10)),
					listen(div10, "swipe", /*handleSwipe*/ ctx[17]),
					listen(div10, "swipeStart", /*handleSwipeStart*/ ctx[19]),
					listen(div10, "swipeEnd", /*handleSwipeEnd*/ ctx[18])
				];

				mounted = true;
			}
		},
		p(ctx, dirty) {
			if (!current || dirty[0] & /*cart_action*/ 4096) set_data(t0, /*cart_action*/ ctx[12]);

			if (!current || dirty[0] & /*$cartOpen*/ 64) {
				toggle_class(div0, "hidden", /*$cartOpen*/ ctx[6] != true);
			}

			if (dirty[0] & /*cart, liquid, inputWidth, min_amounts, rawinclude_dff1c036, rawinclude_2753db78, lec, loading, updateLineItem, min_amounts_data, quantityChange*/ 4310079) {
				each_value = /*cart*/ ctx[4].items;
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
						transition_in(each_blocks[i], 1);
					} else {
						each_blocks[i] = create_each_block(child_ctx);
						each_blocks[i].c();
						transition_in(each_blocks[i], 1);
						each_blocks[i].m(div3, null);
					}
				}

				group_outros();

				for (i = each_value.length; i < each_blocks.length; i += 1) {
					out(i);
				}

				check_outros();
			}

			if ((!current || dirty[0] & /*cart*/ 16) && t12_value !== (t12_value = /*liquid*/ ctx[14].money(/*cart*/ ctx[4].items_subtotal_price) + "")) set_data(t12, t12_value);
			if (!current || dirty[0] & /*loading*/ 1024) set_data(t21, /*loading*/ ctx[10]);

			if (!current || dirty[0] & /*$swipeLeft*/ 8192) {
				set_style(div10, "transform", "translateX(" + /*$swipeLeft*/ ctx[13] + "px)");
			}

			if (!current || dirty[0] & /*$cartOpen*/ 64) {
				toggle_class(div10, "right-0", /*$cartOpen*/ ctx[6]);
			}
		},
		i(local) {
			if (current) return;

			for (let i = 0; i < each_value.length; i += 1) {
				transition_in(each_blocks[i]);
			}

			add_render_callback(() => {
				if (!div10_transition) div10_transition = create_bidirectional_transition(div10, fly, { x: 440 }, true);
				div10_transition.run(1);
			});

			current = true;
		},
		o(local) {
			each_blocks = each_blocks.filter(Boolean);

			for (let i = 0; i < each_blocks.length; i += 1) {
				transition_out(each_blocks[i]);
			}

			if (!div10_transition) div10_transition = create_bidirectional_transition(div10, fly, { x: 440 }, false);
			div10_transition.run(0);
			current = false;
		},
		d(detaching) {
			if (detaching) detach(button0);
			if (detaching) detach(t2);
			if (detaching) detach(div0);
			if (detaching) detach(t3);
			if (detaching) detach(div10);
			destroy_each(each_blocks, detaching);
			/*form_binding*/ ctx[28](null);
			/*div10_binding*/ ctx[29](null);
			div10_resize_listener();
			if (detaching && div10_transition) div10_transition.end();
			mounted = false;
			run_all(dispose);
		}
	};
}

let index = 0;

function instance($$self, $$props, $$invalidate) {
	let cart_action;
	let $cartOpen;
	let $swipeLeft;
	let $cartStore;
	component_subscribe($$self, cartOpen, $$value => $$invalidate(6, $cartOpen = $$value));
	component_subscribe($$self, cartStore, $$value => $$invalidate(31, $cartStore = $$value));
	let { lec } = $$props;
	const liquid = cachedLiquid(lec);
	let { rawinclude_dff1c036 } = $$props;
	let { rawinclude_2753db78 } = $$props;
	let { inputWidth } = $$props;
	let { cart } = $$props;
	let { min_amounts } = $$props;
	const min_amounts_data = JSON.parse(min_amounts);
	cartStore.set(cart);
	let drawerWidth = 0;
	let formNode;
	let drawerNode;
	let loading = false;
	console.log('cart store ', $cartStore);
	set_store_value(cartOpen, $cartOpen = false, $cartOpen);

	async function updateLineItem(itemid, quantity) {
		$$invalidate(10, loading = true);

		await fetch(`/cart/update.js`, {
			method: 'POST',
			headers: { "Content-Type": "application/json" },
			body: JSON.stringify({ updates: { [itemid]: quantity } })
		});

		const cartResponse = await fetch('/cart?view=json');
		const newCartData = await cartResponse.json();
		set_store_value(cartStore, $cartStore.items = newCartData.items, $cartStore);
		set_store_value(cartStore, $cartStore.items_subtotal_price = newCartData.items_subtotal_price, $cartStore);
		$$invalidate(10, loading = false);
	}

	const swipeLeft = spring(0, { stiffness: 0.2, damping: 0.4 });
	component_subscribe($$self, swipeLeft, value => $$invalidate(13, $swipeLeft = value));

	function handleSwipe(e) {
		const { x, y, dx, dy } = e.detail;

		// console.log('x,y,dx', x, y, dx, dy);
		swipeLeft.update($swipeLeft => $swipeLeft + e.detail.dx);

		if ($swipeLeft > drawerWidth / 3) {
			closeCart();
		}
	}

	function handleSwipeEnd(e) {
		$$invalidate(11, swipeLeft.stiffness = 0.2, swipeLeft);
		$$invalidate(11, swipeLeft.damping = 0.4, swipeLeft);
		swipeLeft.set(0);
	}

	function handleSwipeStart() {
		$$invalidate(11, swipeLeft.stiffness = $$invalidate(11, swipeLeft.damping = 1, swipeLeft), swipeLeft);
	}

	function openCart() {
		set_store_value(cartOpen, $cartOpen = true, $cartOpen);
	}

	function closeCart() {
		set_store_value(cartOpen, $cartOpen = false, $cartOpen);
	}

	function toggleCart() {
		set_store_value(cartOpen, $cartOpen = !$cartOpen, $cartOpen);
	}

	function quantityChange(event) {
		updateLineItem(this.id, event.detail.quantity);
	}

	function loadable0_loading_binding(value) {
		loading = value;
		$$invalidate(10, loading);
	}

	const click_handler = item => updateLineItem(item.id, 0);

	function loadable1_loading_binding(value) {
		loading = value;
		$$invalidate(10, loading);
	}

	const click_handler_1 = () => submit();
	const click_handler_2 = () => $$invalidate(10, loading = !loading);

	function form_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			formNode = $$value;
			$$invalidate(8, formNode);
		});
	}

	function div10_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			drawerNode = $$value;
			$$invalidate(9, drawerNode);
		});
	}

	function div10_elementresize_handler() {
		drawerWidth = this.clientWidth;
		$$invalidate(7, drawerWidth);
	}

	$$self.$$set = $$props => {
		if ('lec' in $$props) $$invalidate(0, lec = $$props.lec);
		if ('rawinclude_dff1c036' in $$props) $$invalidate(1, rawinclude_dff1c036 = $$props.rawinclude_dff1c036);
		if ('rawinclude_2753db78' in $$props) $$invalidate(2, rawinclude_2753db78 = $$props.rawinclude_2753db78);
		if ('inputWidth' in $$props) $$invalidate(3, inputWidth = $$props.inputWidth);
		if ('cart' in $$props) $$invalidate(4, cart = $$props.cart);
		if ('min_amounts' in $$props) $$invalidate(5, min_amounts = $$props.min_amounts);
	};

	$$self.$$.update = () => {
		if ($$self.$$.dirty[0] & /*$cartOpen*/ 64) {
			$: $$invalidate(12, cart_action = !$cartOpen ? 'Open' : 'Close');
		}

		if ($$self.$$.dirty[0] & /*$cartOpen*/ 64) {
			$: if ($cartOpen) {
				disableScrollOnBody();
			} else {
				enableScrollOnBody();
			}
		}
	};

	return [
		lec,
		rawinclude_dff1c036,
		rawinclude_2753db78,
		inputWidth,
		cart,
		min_amounts,
		$cartOpen,
		drawerWidth,
		formNode,
		drawerNode,
		loading,
		swipeLeft,
		cart_action,
		$swipeLeft,
		liquid,
		min_amounts_data,
		updateLineItem,
		handleSwipe,
		handleSwipeEnd,
		handleSwipeStart,
		closeCart,
		toggleCart,
		quantityChange,
		loadable0_loading_binding,
		click_handler,
		loadable1_loading_binding,
		click_handler_1,
		click_handler_2,
		form_binding,
		div10_binding,
		div10_elementresize_handler
	];
}

class Main_cart extends SvelteComponent {
	constructor(options) {
		super();

		init(
			this,
			options,
			instance,
			create_fragment,
			safe_not_equal,
			{
				lec: 0,
				rawinclude_dff1c036: 1,
				rawinclude_2753db78: 2,
				inputWidth: 3,
				cart: 4,
				min_amounts: 5
			},
			null,
			[-1, -1]
		);
	}
}

export { Main_cart as default };
