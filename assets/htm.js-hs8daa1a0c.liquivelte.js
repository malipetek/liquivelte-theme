var n=function(t,s,r,h){var e;s[0]=0;for(var u=1;u<s.length;u++){var a=s[u++],g=s[u]?(s[0]|=a?1:2,r[s[u++]]):s[++u];3===a?h[0]=g:4===a?h[1]=Object.assign(h[1]||{},g):5===a?(h[1]=h[1]||{})[s[++u]]=g:6===a?h[1][s[++u]]+=g+"":a?(e=t.apply(g,n(t,g,r,["",null])),h.push(e),g[0]?s[0]|=2:(s[u-2]=0,s[u]=e)):h.push(g)}return h},t=new Map;function htm(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(t){for(var s,r,h=1,e="",u="",a=[0],p=function(t){1===h&&(t||(e=e.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,t,e):3===h&&(t||e)?(a.push(3,t,e),h=2):2===h&&"..."===e&&t?a.push(4,t,0):2===h&&e&&!t?a.push(5,0,!0,e):h>=5&&((e||!t&&5===h)&&(a.push(h,0,e,r),h=6),t&&(a.push(h,t,0,r),h=6)),e=""},g=0;g<t.length;g++){g&&(1===h&&p(),p(g));for(var i=0;i<t[g].length;i++)s=t[g][i],1===h?"<"===s?(p(),a=[a],h=3):e+=s:4===h?"--"===e&&">"===s?(h=1,e=""):e=s+e[0]:u?s===u?u="":e+=s:'"'===s||"'"===s?u=s:">"===s?(p(),h=1):h&&("="===s?(h=5,r=e,e=""):"/"===s&&(h<5||">"===t[g][i+1])?(p(),3===h&&(a=a[0]),h=a,(a=a[0]).push(2,0,h),h=0):" "===s||"\t"===s||"\n"===s||"\r"===s?(p(),h=2):e+=s),3===h&&"!--"===e&&(h=4,a=a[0])}return p(),a}(s)),r),arguments,[])).length>1?r:r[0]}export{htm};
